<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6" xmlns:th="http://www.thymeleaf.org">

<link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<script src="/webjars/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/webjars/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<head>
    <meta charset="utf-8"/>
    <title>Order Manager</title>
</head>
<body>
<div align="right" sec:authorize="isAuthenticated()">
    welcome <b> <span sec:authentication="name">Username</span> </b>
    &nbsp;
    <i>
        <span sec:authentication="principal.authorities">Roles</span>
    </i>
    <form method="post" th:action="@{/logout}">
        <input class="btn btn-primary" type="submit" value="logout">
    </form>
</div>
<div align="center">
    <h1>Order List</h1>
    <div sec:authorize="hasAnyAuthority('ADMIN')">

        <a href="/new">Create New Order</a>
    </div>
    <div sec:authorize="hasAnyAuthority('ADMIN')">
        <a href="/users">Users Management</a>
    </div>
    <br/><br/>
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
        <tr>
            <th>Order ID</th>
            <th>Order Date</th>
            <th>Order Mode</th>
            <th>Customer id</th>
            <th>Order Status</th>
            <th>Order Total</th>
            <th>Sales Rep id</th>
            <th>Promotion id</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>

        <tr th:each="orders : ${ordersLists}">
            <td th:text="${orders.id}">Order ID</td>
            <td th:text="${orders.orderDate}">Order Date</td>
            <td th:text="${orders.orderMode}">Order Mode</td>
            <td th:text="${orders.customerId}">Customer id</td>
            <td th:text="${orders.orderStatus}">Order Status</td>
            <td th:text="${orders.orderTotal}">Order Total</td>
            <td th:text="${orders.salesRepId}">Sales Rep id</td>
            <td th:text="${orders.promotionId}">Promotion id</td>
            <td>
                <a th:href="@{'/detail/' + ${orders.id}}">Detail</a>
                &nbsp;
                <a sec:authorize="hasAnyAuthority('ADMIN','EDITOR')" th:href="@{'/edit/' + ${orders.id}}">Edit</a>
                &nbsp;&nbsp;&nbsp;
                <a sec:authorize="hasAnyAuthority('ADMIN')" th:href="@{'/delete/' + ${orders.id}}">Delete</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>