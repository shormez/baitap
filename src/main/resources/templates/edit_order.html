<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>Edit Order</title>
</head>
<body>

<div align="left">
    <h3>Edit Order</h3>
    <br/>
    <form action="#" method="get" th:action="@{'/submit/'+${orders.id}}" th:object="${orders}">
        <input th:field="*{id}" type="hidden"/>
        <table border="0" cellpadding="10">
            <tr>
                <td>Order Date:</td>
                <td><input th:field="*{orderDate}" th:value="${orderDate}" type="date"/></td>
            </tr>
            <tr>
                <td>Order Mode:</td>
                <td><input th:field="*{orderMode}" type="text"/></td>
            </tr>
            <tr>
                <td>Customer id:</td>
                <td><input th:field="*{customerId}" type="text"/></td>
            </tr>
            <tr>
                <td>Order Total:</td>
                <td><input th:field="*{orderTotal}" type="text"/></td>
            </tr>
            <tr>
                <td>Sales Rep id:</td>
                <td><input th:field="*{salesRepId}" type="text"/></td>
            </tr>
            <tr>
                <td>Promotion id:</td>
                <td><input th:field="*{promotionId}" type="text"/></td>
            </tr>
        </table>

        <h3>Order detail</h3>
        <table border="0" cellpadding="10">
            <thead>
            <tr>
                <th>Select</th>
                <th>Quantity</th>
                <th>Product ID</th>
                <th>Unit Price</th>
                <th>Line Item ID</th>
            </tr>
            </thead>
            <tbody id="order-details-table">
            <tr th:each="orderDetail : ${orderDetaillist}">
                <td><input class="select-checkbox" type="checkbox"></td>
                <td><input name="oldQuantity[]" th:value="${orderDetail.quantity}" type="text"/></td>
                <td><input name="oldProductId[]" th:value="${orderDetail.productId}" type="text"/></td>
                <td><input name="oldUnitPrice[]" th:value="${orderDetail.unitPrice}" type="text"/></td>
                <td><input name="oldLineItemId[]" th:value="${orderDetail.lineItemId}" type="text"/></td>
            </tr>
            </tbody>
        </table>

        <div class="actions">
            <button id="add-new-btn" type="button">Add Row</button>
            <button id="delete-btn" type="button">Delete</button>
            <script>
                const btn = document.getElementById('add-new-btn');
                const btnDel = document.getElementById('delete-btn');
                const orderDetailsTable = document.getElementById('order-details-table');

                function appendHTML() {
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `
                        <td><input type="checkbox" class="select-checkbox" /></td>
                        <td><input type="text" name="newQuantity[]" /></td>
                        <td><input type="text" name="newProductId[]" /></td>
                        <td><input type="text" name="newUnitPrice[]" /></td>
                        <td><input type="text" name="newLineItemId[]" /></td>
                    `;
                    orderDetailsTable.appendChild(newRow);
                }

                function delHTML() {
                    const checkboxes = document.querySelectorAll('.select-checkbox:checked');
                    checkboxes.forEach(checkbox => {
                       const row = checkbox.closest('tr');
                       row.remove();

                    });
                }

                btn.addEventListener('click', appendHTML);
                btnDel.addEventListener('click', delHTML);
            </script>

            <button type="submit">Submit</button>
        </div>
    </form>
</div>

</body>
</html>
