<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>Edit Order</title>
</head>
<body>

<div align="left">
    <h3>Edit Order</h3>
    <br />
    <form action="#" th:action="@{'/submit/'+${orders.id}}" th:object="${orders}" method="get">
        <input type="hidden" th:field="*{id}" />
        <table border="0" cellpadding="10">
            <tr>
                <td>Order Date:</td>
                <td><input type="date" th:field="*{orderDate}" th:value="${orderDate}" /></td>
            </tr>
            <tr>
                <td>Order Mode:</td>
                <td><input type="text" th:field="*{orderMode}" /></td>
            </tr>
            <tr>
                <td>Customer id:</td>
                <td><input type="text" th:field="*{customerId}" /></td>
            </tr>
            <tr>
                <td>Order Total:</td>
                <td><input type="text" th:field="*{orderTotal}" /></td>
            </tr>
            <tr>
                <td>Sales Rep id:</td>
                <td><input type="text" th:field="*{salesRepId}" /></td>
            </tr>
            <tr>
                <td>Promotion id:</td>
                <td><input type="text" th:field="*{promotionId}" /></td>
            </tr>
        </table>

        <h3>Order detail</h3>
        <table border="0" cellpadding="10">
            <thead>
            <tr>
                <th>Select</th>
                <th>Quantity</th>
                <th>Product ID</th>
                <th>Unit Price</th>
                <th>Line Item ID</th>
            </tr>
            </thead>
            <tbody id="order-details-table">
            <tr th:each="orderDetail : ${orderDetaillist}">
                <td><input type="checkbox" class="select-checkbox" ></td>
                <td><input type="text" th:value="${orderDetail.quantity}" name="oldQuantity[]" /></td>
                <td><input type="text" th:value="${orderDetail.productId}" name="oldProductId[]" /></td>
                <td><input type="text" th:value="${orderDetail.unitPrice}" name="oldUnitPrice[]" /></td>
                <td><input type="text" th:value="${orderDetail.lineItemId}" name="oldLineItemId[]" /></td>
            </tr>
            </tbody>
        </table>

        <div class="actions">
            <button id="add-new-btn" type="button">Add Row</button>
            <button type="button" id="delete-btn">Delete</button>
            <script>
                const btn = document.getElementById('add-new-btn');
                const btnDel = document.getElementById('delete-btn');
                const orderDetailsTable = document.getElementById('order-details-table');

                function appendHTML() {
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `
                        <td><input type="checkbox" class="select-checkbox" /></td>
                        <td><input type="text" name="newQuantity[]" /></td>
                        <td><input type="text" name="newProductId[]" /></td>
                        <td><input type="text" name="newUnitPrice[]" /></td>
                        <td><input type="text" name="newLineItemId[]" /></td>
                    `;
                    orderDetailsTable.appendChild(newRow);
                }

                function delHTML() {
                    const checkboxes = document.querySelectorAll('.select-checkbox:checked');
                    checkboxes.forEach(checkbox => {
                        const row = checkbox.closest('tr');
                        const inputs = row.querySelectorAll('input[type="text"]');
                         inputs.forEach(input => input.disabled = true); row.remove();

                    });
                }

                btn.addEventListener('click', appendHTML);
                btnDel.addEventListener('click', delHTML);
            </script>

            <button type="submit">Submit</button>
        </div>
    </form>
</div>

</body>
</html>
